# 3.1.4 Методы __setattr__, __getattribute__, __getattr__ и __delattr__

Подвиг 4. Вы создаете интернет-магазин. Для этого нужно объявить два класса:

`Shop` - класс для управления магазином в целом;
`Product` - класс для представления отдельного товара.

Объекты класса `Shop` следует создавать командой:

```python
shop = Shop(название магазина)
```

В каждом объекте класса `Shop` должно создаваться локальное свойство:

`goods` - список товаров (изначально список пустой).

А также в классе объявить методы:

- `add_product(self, product)` - добавление нового товара в магазин (в конец списка `goods`);
- `remove_product(self, product)` - удаление товара `product` из магазина (из списка `goods`);

Объекты класса `Product` следует создавать командой:

```python
p = Product(название, вес, цена)
```

В них автоматически должны формироваться локальные атрибуты:

- `id` - уникальный идентификационный номер товара (генерируется автоматически как целое положительное число от 1 и
  далее);
- `name` - название товара (строка);
- `weight` - вес товара (целое или вещественное положительное число);
- `price` - цена (целое или вещественное положительное число).

В классе `Product` через магические методы (подумайте какие) осуществить проверку на тип присваиваемых данных локальным
атрибутам объектов класса (например, `id` - целое число, `name` - строка и т.п.). Если проверка не проходит, то
генерировать исключение командой:

```python
raise TypeError("Неверный тип присваиваемых данных.")
```

Также в классе `Product` с помощью магического(их) метода(ов) запретить удаление локального атрибута `id`. При попытке
это сделать генерировать исключение:

```python
raise AttributeError("Атрибут id удалять запрещено.")
```

Пример использования классов (в программе эти строчки не писать):

```python
shop = Shop("Балакирев и К")
book = Product("Python ООП", 100, 1024)
shop.add_product(book)
shop.add_product(Product("Python", 150, 512))
for p in shop.goods:
    print(f"{p.name}, {p.weight}, {p.price}")
```

P.S. На экран ничего выводить не нужно.

# Solution

```python
class Shop:

    def __init__(self, title):
        self.title = title
        self.goods = []

    def add_product(self, product):
        self.goods.append(product)

    def remove_product(self, product):
        self.goods.remove(product)

    def __setattr__(self, key, value):
        d = {'title': (str,), 'goods': (list, )}
        if type(value) not in d[key]:
            raise TypeError("Неверный тип присваиваемых данных.")
        else:
            object.__setattr__(self, key, value)

class Product:
    id = 1
    def __init__(self, name, weight, price):
        self.id = Product.id
        self.name = name
        self.weight = weight
        self.price = price
        Product.id += 1

    def __setattr__(self, key, value):
        d = {'name': (str, ), 'weight': (float, int), 'price': (float, int), 'id': (int, )}
        if type(value) not in d[key] or type(value) in (int, float) and value < 0:
            raise TypeError("Неверный тип присваиваемых данных.")
        else:            
            object.__setattr__(self, key, value)

    def __delattr__(self, item):
        if item != 'id':
            object.__delattr__(self, item)
        else:
            raise AttributeError("Атрибут id удалять запрещено.")
```